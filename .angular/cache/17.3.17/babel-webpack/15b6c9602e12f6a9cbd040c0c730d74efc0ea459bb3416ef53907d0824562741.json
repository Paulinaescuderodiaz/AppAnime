{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Equipo/Downloads/AppAnime/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"../../services/storage.service\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"@angular/forms\";\nexport let LoginPage = /*#__PURE__*/(() => {\n  class LoginPage {\n    router;\n    authService;\n    storageService;\n    alertController;\n    loadingController;\n    segmentValue = 'login';\n    showPassword = false;\n    loginData = {\n      email: '',\n      password: ''\n    };\n    registerData = {\n      fullName: '',\n      email: '',\n      password: '',\n      confirmPassword: ''\n    };\n    constructor(router, authService, storageService, alertController, loadingController) {\n      this.router = router;\n      this.authService = authService;\n      this.storageService = storageService;\n      this.alertController = alertController;\n      this.loadingController = loadingController;\n    }\n    ngOnInit() {\n      this.checkExistingSession();\n    }\n    checkExistingSession() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const currentUser = yield _this.storageService.get('currentUser');\n        if (currentUser) {\n          _this.router.navigate(['/home'], {\n            replaceUrl: true\n          });\n        }\n      })();\n    }\n    segmentChanged(event) {\n      this.segmentValue = event.detail.value;\n    }\n    togglePassword() {\n      this.showPassword = !this.showPassword;\n    }\n    login() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this2.loginData.email || !_this2.loginData.password) {\n          yield _this2.showAlert('Error', 'Por favor completa todos los campos');\n          return;\n        }\n        if (!_this2.isValidEmail(_this2.loginData.email)) {\n          yield _this2.showAlert('Error', 'Por favor ingresa un email válido');\n          return;\n        }\n        const loading = yield _this2.loadingController.create({\n          message: 'Iniciando sesión...',\n          spinner: 'crescent'\n        });\n        yield loading.present();\n        try {\n          const result = yield _this2.authService.loginWithEmail(_this2.loginData.email, _this2.loginData.password);\n          if (result.success) {\n            yield loading.dismiss();\n            _this2.router.navigate(['/home'], {\n              replaceUrl: true\n            });\n          } else {\n            yield loading.dismiss();\n            yield _this2.showAlert('Error', result.message || 'Credenciales incorrectas');\n          }\n        } catch (error) {\n          yield loading.dismiss();\n          yield _this2.showAlert('Error', 'Ocurrió un error al iniciar sesión');\n        }\n      })();\n    }\n    register() {\n      var _this3 = this;\n      return _asyncToGenerator(function* () {\n        if (!_this3.registerData.fullName || !_this3.registerData.email || !_this3.registerData.password || !_this3.registerData.confirmPassword) {\n          yield _this3.showAlert('Error', 'Por favor completa todos los campos');\n          return;\n        }\n        if (!_this3.isValidEmail(_this3.registerData.email)) {\n          yield _this3.showAlert('Error', 'Por favor ingresa un email válido');\n          return;\n        }\n        if (_this3.registerData.password.length < 8) {\n          yield _this3.showAlert('Error', 'La contraseña debe tener al menos 8 caracteres');\n          return;\n        }\n        if (_this3.registerData.password !== _this3.registerData.confirmPassword) {\n          yield _this3.showAlert('Error', 'Las contraseñas no coinciden');\n          return;\n        }\n        const loading = yield _this3.loadingController.create({\n          message: 'Creando cuenta...',\n          spinner: 'crescent'\n        });\n        yield loading.present();\n        try {\n          const result = yield _this3.authService.registerWithEmail(_this3.registerData.email, _this3.registerData.password, _this3.registerData.fullName);\n          if (result.success) {\n            yield loading.dismiss();\n            _this3.router.navigate(['/home'], {\n              replaceUrl: true\n            });\n          } else {\n            yield loading.dismiss();\n            yield _this3.showAlert('Error', result.message || 'No se pudo crear la cuenta');\n          }\n        } catch (error) {\n          yield loading.dismiss();\n          yield _this3.showAlert('Error', 'Ocurrió un error al registrarse');\n        }\n      })();\n    }\n    loginWithGoogle() {\n      var _this4 = this;\n      return _asyncToGenerator(function* () {\n        const loading = yield _this4.loadingController.create({\n          message: 'Conectando con Google...',\n          spinner: 'crescent'\n        });\n        yield loading.present();\n        try {\n          const result = yield _this4.authService.loginWithGoogle();\n          if (result.success) {\n            yield loading.dismiss();\n            _this4.router.navigate(['/home'], {\n              replaceUrl: true\n            });\n          } else {\n            yield loading.dismiss();\n            yield _this4.showAlert('Error', result.message || 'No se pudo iniciar sesión con Google');\n          }\n        } catch (error) {\n          yield loading.dismiss();\n          yield _this4.showAlert('Error', 'Ocurrió un error al conectar con Google');\n        }\n      })();\n    }\n    isValidEmail(email) {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      return emailRegex.test(email);\n    }\n    showAlert(header, message) {\n      var _this5 = this;\n      return _asyncToGenerator(function* () {\n        const alert = yield _this5.alertController.create({\n          header,\n          message,\n          buttons: ['OK']\n        });\n        yield alert.present();\n      })();\n    }\n    static ɵfac = function LoginPage_Factory(t) {\n      return new (t || LoginPage)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.StorageService), i0.ɵɵdirectiveInject(i4.AlertController), i0.ɵɵdirectiveInject(i4.LoadingController));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: LoginPage,\n      selectors: [[\"app-login\"]],\n      decls: 32,\n      vars: 5,\n      consts: [[1, \"login-content\", 3, \"fullscreen\"], [1, \"login-container\"], [1, \"header-section\"], [\"name\", \"film-outline\", 1, \"logo-icon\"], [1, \"subtitle\"], [1, \"form-section\"], [1, \"login-card\"], [\"lines\", \"none\", 1, \"input-item\"], [\"name\", \"mail-outline\", \"slot\", \"start\"], [\"type\", \"email\", \"placeholder\", \"Correo electr\\u00F3nico\", \"autocomplete\", \"email\", 3, \"ngModelChange\", \"ngModel\"], [\"name\", \"lock-closed-outline\", \"slot\", \"start\"], [\"placeholder\", \"Contrase\\u00F1a\", \"autocomplete\", \"current-password\", 3, \"ngModelChange\", \"type\", \"ngModel\"], [\"slot\", \"end\", 1, \"password-toggle\", 3, \"click\", \"name\"], [\"expand\", \"block\", 1, \"login-button\", 3, \"click\"], [\"name\", \"log-in-outline\", \"slot\", \"start\"], [1, \"divider\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"google-button\", 3, \"click\"], [\"name\", \"logo-google\", \"slot\", \"start\"], [1, \"register-link\"], [\"routerLink\", \"/register\", 1, \"link-text\"]],\n      template: function LoginPage_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-content\", 0)(1, \"div\", 1)(2, \"div\", 2);\n          i0.ɵɵelement(3, \"ion-icon\", 3);\n          i0.ɵɵelementStart(4, \"h1\");\n          i0.ɵɵtext(5, \"AnimeReview\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"p\", 4);\n          i0.ɵɵtext(7, \"Tu app de rese\\u00F1as de anime\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"div\", 5)(9, \"ion-card\", 6)(10, \"ion-card-content\")(11, \"ion-item\", 7);\n          i0.ɵɵelement(12, \"ion-icon\", 8);\n          i0.ɵɵelementStart(13, \"ion-input\", 9);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginPage_Template_ion_input_ngModelChange_13_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.loginData.email, $event) || (ctx.loginData.email = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(14, \"ion-item\", 7);\n          i0.ɵɵelement(15, \"ion-icon\", 10);\n          i0.ɵɵelementStart(16, \"ion-input\", 11);\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function LoginPage_Template_ion_input_ngModelChange_16_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.loginData.password, $event) || (ctx.loginData.password = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"ion-icon\", 12);\n          i0.ɵɵlistener(\"click\", function LoginPage_Template_ion_icon_click_17_listener() {\n            return ctx.togglePassword();\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(18, \"ion-button\", 13);\n          i0.ɵɵlistener(\"click\", function LoginPage_Template_ion_button_click_18_listener() {\n            return ctx.login();\n          });\n          i0.ɵɵelement(19, \"ion-icon\", 14);\n          i0.ɵɵtext(20, \" Iniciar Sesi\\u00F3n \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"div\", 15)(22, \"span\");\n          i0.ɵɵtext(23, \"o contin\\u00FAa con\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(24, \"ion-button\", 16);\n          i0.ɵɵlistener(\"click\", function LoginPage_Template_ion_button_click_24_listener() {\n            return ctx.loginWithGoogle();\n          });\n          i0.ɵɵelement(25, \"ion-icon\", 17);\n          i0.ɵɵtext(26, \" Google \");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"div\", 18)(28, \"p\");\n          i0.ɵɵtext(29, \" \\u00BFNo tienes cuenta? \");\n          i0.ɵɵelementStart(30, \"span\", 19);\n          i0.ɵɵtext(31, \"Reg\\u00EDstrate\");\n          i0.ɵɵelementEnd()()()()()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵproperty(\"fullscreen\", true);\n          i0.ɵɵadvance(13);\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.loginData.email);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"type\", ctx.showPassword ? \"text\" : \"password\");\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.loginData.password);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"name\", ctx.showPassword ? \"eye-off-outline\" : \"eye-outline\");\n        }\n      },\n      dependencies: [i5.NgControlStatus, i5.NgModel, i1.RouterLink, i4.IonButton, i4.IonCard, i4.IonCardContent, i4.IonContent, i4.IonIcon, i4.IonInput, i4.IonItem, i4.TextValueAccessor, i4.RouterLinkDelegate],\n      styles: [\".login-content[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)}.login-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;min-height:100%;padding:20px}.header-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:40px;animation:_ngcontent-%COMP%_fadeInDown .8s ease}.header-section[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{font-size:80px;color:#e94560;margin-bottom:20px;filter:drop-shadow(0 0 20px rgba(233,69,96,.5))}.header-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#fff;margin:0 0 10px}.header-section[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{color:#ffffffb3;font-size:16px;margin:0}.form-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .8s ease}.login-card[_ngcontent-%COMP%]{background:#ffffff0d;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:20px;box-shadow:0 8px 32px #0000004d}.login-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:30px 20px}.input-item[_ngcontent-%COMP%]{--background: rgba(255, 255, 255, .1);--border-radius: 12px;margin-bottom:16px;border-radius:12px}.input-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#e94560;margin-right:12px}.input-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--color: #ffffff;--placeholder-color: rgba(255, 255, 255, .5)}.input-item[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{cursor:pointer;color:#fff9}.input-item[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:hover{color:#e94560}.login-button[_ngcontent-%COMP%]{--background: linear-gradient(135deg, #e94560 0%, #d63447 100%);--border-radius: 12px;margin-top:20px;height:50px;font-weight:600;text-transform:none;font-size:16px;box-shadow:0 4px 15px #e9456066}.login-button[_ngcontent-%COMP%]:hover{--background: linear-gradient(135deg, #d63447 0%, #c02942 100%)}.divider[_ngcontent-%COMP%]{text-align:center;margin:25px 0;position:relative}.divider[_ngcontent-%COMP%]:before, .divider[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:50%;width:40%;height:1px;background:#fff3}.divider[_ngcontent-%COMP%]:before{left:0}.divider[_ngcontent-%COMP%]:after{right:0}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff9;font-size:14px;background:transparent;padding:0 10px}.google-button[_ngcontent-%COMP%]{--border-color: rgba(255, 255, 255, .3);--border-width: 2px;--border-radius: 12px;--color: #ffffff;height:50px;text-transform:none;font-size:16px}.google-button[_ngcontent-%COMP%]:hover{--background: rgba(255, 255, 255, .1)}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:25px}.register-link[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#ffffffb3;font-size:14px;margin:0}.register-link[_ngcontent-%COMP%]   .link-text[_ngcontent-%COMP%]{color:#e94560;font-weight:600;cursor:pointer;text-decoration:underline}.register-link[_ngcontent-%COMP%]   .link-text[_ngcontent-%COMP%]:hover{color:#ff6b7a}@keyframes _ngcontent-%COMP%_fadeInDown{0%{opacity:0;transform:translateY(-30px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}\"]\n    });\n  }\n  return LoginPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}